"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.importFiles = void 0;
const tslib_1 = require("tslib");
const globby_1 = tslib_1.__importDefault(require("globby"));
const logger_1 = require("@tsed/logger");
const cleanGlobPatterns_1 = require("./cleanGlobPatterns");
async function importFiles(patterns, exclude) {
    const files = globby_1.default.sync(cleanGlobPatterns_1.cleanGlobPatterns(patterns, exclude));
    const symbols = [];
    for (const file of files) {
        try {
            const exports = await Promise.resolve().then(() => tslib_1.__importStar(require(file)));
            Object.keys(exports).forEach((key) => symbols.push(exports[key]));
        }
        catch (er) {
            /* istanbul ignore next */
            logger_1.$log.error(er);
            /* istanbul ignore next */
            process.exit(-1);
        }
    }
    return symbols;
}
exports.importFiles = importFiles;
//# sourceMappingURL=importFiles.js.map